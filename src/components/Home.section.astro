---
import { Image } from "astro:assets";
import Facu from "../assets/facu2.png";
import Social from "./Social.astro";
import UpArrow from "../assets/svg/up.svg";
---

<article id="home-section-title">
  <div
    id="home-section"
    class="min-h-dvh relative bg-[var(--primary-bg)] flex flex-col lg:flex-row items-center justify-evenly lg:justify-center p-12 lg:p-24"
  >
    <!-- <section class="container">
    <div class="cubo mx-auto">
      <div id="cara1" class="cara"></div>
      <div id="cara2" class="cara"></div>
      <div id="cara3" class="cara"></div>
      <div id="cara4" class="cara"></div>
      <div id="cara5" class="cara"></div>
      <div id="cara6" class="cara"></div>
    </div>
  </section> -->
    <!-- <div
      class="absolute square squareLeft size-[3rem] bottom-[1rem] md:bottom-[3rem] left-[0.2rem] md:left-[3rem] flex flex-col items-center"
    >
      <div class="sq1 border size-[1rem] rotate-45 border-t-0 border-l-0"></div>
      <div class="sq2 border size-[1rem] rotate-45 border-t-0 border-l-0"></div>
      <div class="sq3 border size-[1rem] rotate-45 border-t-0 border-l-0"></div>
    </div>
    <div
      class="absolute square squareRight size-[3rem] bottom-[1rem] md:bottom-[3rem] right-[0.2rem] md:right-[3rem] flex flex-col items-center"
    >
      <div class="sq1 border size-[1rem] rotate-45 border-t-0 border-l-0"></div>
      <div class="sq2 border size-[1rem] rotate-45 border-t-0 border-l-0"></div>
      <div class="sq3 border size-[1rem] rotate-45 border-t-0 border-l-0"></div>
    </div> -->
    <section
      class="flex flex-col basis-full w-full lg:basis-1/2 text-[#fff] items-center order-2 lg:order-1 lg:gap-y-2 xl:gap-y-4 [&>*]:text-center [&>*]:[text-shadow:_3px_3px_5px_#000]"
    >
      <h3 class="text-xl lg:text-xl xl:text-2xl 2xl:text-4xl">
        Facundo Ramírez
      </h3>
      <div
        class="flex flex-row flex-wrap gap-1 lg:gap-2 items-center justify-center"
      >
        <h2 class="mt-2 lg:mt-0 text-4xl lg:text-4xl xl:text-5xl 2xl:text-7xl">
          Desarrollador
        </h2>
        <h2 class="text-4xl lg:text-4xl xl:text-5xl 2xl:text-7xl">
          Full Stack
        </h2>
      </div>

      <Social />
      <button
        id="walk"
        class="min-w-fit mt-2 lg:mt-4 text-white bg-[var(--primary-color)] hover:bg-[var(--primary-color)] focus:outline-none focus:ring-4 focus:ring-[var(--primary-color)] font-medium rounded-full text-sm lg:text-lg px-6 py-2 text-center me-2 mb-2 dark:bg-[var(--primary-color)] dark:hover:bg-[var(--primary-color)] dark:focus:ring-[var(--primary-color)]"
        >Da un paseo por mi web aquí</button
      >
    </section>
    <section
      class="basis-full w-full lg:basis-1/2 order-1 lg:order-2 mix-blend-lighten"
    >
      <Image
        src={Facu}
        alt="Facu"
        class="facuImg min-w-[10rem] w-[75%] max-w-[30rem] lg:min-w-[25rem] lg:w-[75%] lg:max-w-[50rem] mx-auto"
      />
    </section>
  </div>
  <UpArrow
    id="up"
    class="fixed z-40 cursor-pointer rounded-full bg-[var(--secondary-color)] bottom-[1.5rem] right-[1.5rem] lg:bottom-[3rem] lg:right-[3rem] size-[2.5rem] lg:size-[3rem] hover:bg-white"
  />
  <!-- <button
    id="
    up"
    class="fixed z-50 rounded-full bg-[var(--secondary-color)] right-[3rem] bottom-[3rem] text-white opacity-0 size-[3rem] [&>span]:border [&>span]:border-2 [&>span]:border-r-0 [&>span]:border-b-0"
  >
    <span
      class="absolute left-1/2 top-1/2 size-[1rem] -translate-x-1/2 -translate-y-[calc(75%+1px)] rotate-45"
    ></span>
    <span
      class="absolute left-1/2 top-1/2 size-[1rem] -translate-x-1/2 -translate-y-1/4 rotate-45"
    ></span>
    <span
      class="absolute left-1/2 top-1/2 size-[1rem] -translate-x-1/2 translate-y-[calc(25%+1px)] rotate-45"
    ></span>
  </UpArrow> -->
</article>

<style>
  /* #home::before {
    content: "";
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background: rgba(0, 0, 0, 0.4);
  } */
  #home-section {
    background-image: url("../assets/Trama.svg");
    background-size: 70%;
    background-position: left center;
    background-repeat: no-repeat;
    @media screen and (max-width: 1024px) {
      background-image: none;
    }

    .square {
      animation: arrowsMovement 1s infinite;
    }

    svg {
      @media screen and (max-width: 1024px) {
        width: 2rem;
        height: 2rem;
        padding: 5px;
      }
    }
    #wp {
      @media screen and (max-width: 1024px) {
        padding: 6px;
      }
    }
    #lkd {
      @media screen and (max-width: 1024px) {
        padding: 7px;
      }
    }
    #gh {
      @media screen and (max-width: 1024px) {
        padding: 3px;
      }
    }
    #gh {
      @media screen and (max-width: 1024px) {
        padding: 3px;
      }
    }
    .facuImg {
      mask-image: linear-gradient(black 60%, transparent);
      filter: drop-shadow(0px 0px 10px #ccc);
    }
    .container {
      perspective: 1500px;
      .cubo {
        position: relative;
        width: 300px;
        height: 300px;
        transform-style: preserve-3d;
        transform: rotateX(-45deg) rotateY(-45deg);
        animation: girar 25s linear infinite;
        .cara {
          position: absolute;
          width: 100%;
          height: 100%;
          background-repeat: no-repeat;
          background-size: 75%;
          background-position: center;
          box-shadow: inset 0 0 5px #d4d4d4;
        }
        #cara1 {
          background-image: url("../assets/Favicon_rojo.svg");
          background-color: var(--primary-color);
          transform: translateZ(150px);
        }
        #cara2 {
          background-image: url("../assets/Favicon_negro.svg");
          background-color: var(--primary-bg);
          transform: translateX(150px) rotateY(90deg);
        }
        #cara3 {
          background-image: url("../assets/Favicon_rojo.svg");
          background-color: var(--primary-color);
          transform: translateZ(-150px) rotateY(180deg);
        }
        #cara4 {
          background-image: url("../assets/Favicon_negro.svg");
          background-color: var(--primary-bg);
          transform: translateX(-150px) rotateY(-90deg);
        }
        #cara5 {
          background-image: url("../assets/logo_principal.png");
          background-size: cover;
          background-color: var(--primary-bg);
          transform: translateY(-150px) rotateX(90deg);
        }
        #cara6 {
          background-image: url("../assets/Favicon_rojo.svg");
          background-color: var(--primary-color);
          transform: translateY(150px) rotateX(-90deg);
        }
      }
    }

    h3 {
      opacity: 0;
      filter: blur(20px);
      transform: translateY(120%);
      animation: textOne 0.8s 0.2s forwards linear;
    }
    h2 {
      opacity: 0;
      filter: blur(20px);
      transform: translateY(120%);
      animation: textOne 0.8s 0.4s forwards linear;
    }
    h1 {
      opacity: 0;
      filter: blur(20px);
      transform: translateY(120%);
      animation: textTwo 0.8s 0.6s forwards linear;
    }
    #social {
      svg {
        opacity: 0;
        filter: blur(20px);
        transform: translateY(120%);
        animation: textThree 0.8s 0.8s forwards linear;
      }
    }
    #walk {
      opacity: 0;
      filter: blur(20px);
      transform: translateY(120%);
      animation:
        infiniteBrightness 1.5s 1s infinite,
        textFour 0.8s 1s forwards linear;
    }
  }

  @keyframes textOne {
    to {
      opacity: 1;
      filter: blur(0);
      transform: translateX(0%);
    }
  }

  @keyframes textTwo {
    to {
      opacity: 1;
      filter: blur(0);
      transform: translateX(0%);
    }
  }

  @keyframes textThree {
    to {
      opacity: 1;
      filter: blur(0);
      transform: translateY(0%);
    }
  }

  @keyframes textFour {
    to {
      opacity: 1;
      filter: blur(0);
      transform: translateY(0%);
    }
  }

  @keyframes girar {
    0% {
      transform: rotateX(-35deg) rotateY(0deg);
    }
    50% {
      transform: rotateX(-35deg) rotateY(-180deg);
    }
    100% {
      transform: rotateX(-35deg) rotateY(-360deg);
    }
  }

  @keyframes infiniteBrightness {
    0% {
      box-shadow:
        0 0 5px #fff,
        0 0 5px #fff,
        0 0 5px var(--primary-color),
        0 0 10px var(--primary-color),
        0 0 15px var(--primary-color),
        0 0 20px var(--primary-color);
    }
    50% {
      box-shadow:
        0 0 5px #fff,
        0 0 10px #fff,
        0 0 15px var(--primary-color),
        0 0 20px var(--primary-color),
        0 0 25px var(--primary-color),
        0 0 30px var(--primary-color);
    }
    100% {
      box-shadow:
        0 0 5px #fff,
        0 0 5px #fff,
        0 0 5px var(--primary-color),
        0 0 10px var(--primary-color),
        0 0 15px var(--primary-color),
        0 0 20px var(--primary-color);
    }
  }

  @keyframes arrowsMovement {
    0% {
      transform: translateY(0);
    }
    50% {
      transform: translateY(-100%);
    }
    100% {
      transform: translateY(0);
    }
  }
</style>

<script>
  import { driver } from "driver.js";
  import "driver.js/dist/driver.css";
  import gsap from "gsap";
  import ScrollTrigger from "gsap/ScrollTrigger";
  gsap.registerPlugin(ScrollTrigger);

  const botonIrArriba = document.querySelector("#up");
  const homeSection = document.querySelector("#home-section");

  // Función para mostrar u ocultar el botón
  function manejarScroll() {
    if (window.scrollY > 100) {
      gsap.to(botonIrArriba, { opacity: 1, duration: 0.3 }); // Mostrar el botón
    } else {
      gsap.to(botonIrArriba, { opacity: 0, duration: 0.3 }); // Ocultar el botón
    }
  }

  // Escuchar el evento de scroll
  window.addEventListener("scroll", manejarScroll);

  // Mostrar el botón al hacer scroll
  gsap.to(botonIrArriba, {
    scrollTrigger: {
      trigger: homeSection, // Reemplaza con el elemento que quieres que active el scrollTrigger
      start: "top+=150",
      end: "bottom top",
      scrub: true,
      markers: false,
    },
  });

  // Hacer scroll hacia arriba al hacer click
  botonIrArriba?.addEventListener("click", () => {
    gsap.to(window, { scrollTo: 0, duration: 0.2 });
  });

  const walk = document.getElementById("walk");

  const driverObj = driver({
    showProgress: false,
    showButtons: ["next", "previous"],
    popoverClass: "driverjs-theme",
    overlayColor: "#313131",
    steps: [
      {
        element: "#walk",
        popover: {
          title: "Inicio",
          description:
            "Informate quien soy y lo que puedo ofrecerte, dando este paseo",
          side: "bottom",
          align: "center",
        },
      },
      {
        element: "#about-description",
        popover: {
          title: "Sobre mi",
          description:
            "Conoce como fueron mis inicios para llegar a ser desarrollador de software",
          side: "bottom",
          align: "center",
        },
      },
      {
        element: "#projects-description",
        popover: {
          title: "Proyectos",
          description:
            "Te muestro algunos de mis proyectos realizados en mis tiempos libres",
          side: "bottom",
          align: "center",
        },
      },
      {
        element: "#curriculum-description",
        popover: {
          title: "Curriculum",
          description:
            "Enterate de los estudios y experiencia de la persona que desarrollara tu web",
          side: "bottom",
          align: "center",
        },
      },
      {
        element: "#contact-description",
        popover: {
          title: "Contacto",
          description: "Te dejo toda la info para que puedas contactarme",
          side: "bottom",
          align: "center",
        },
      },
    ],
  });

  /*   driverObj.highlight({
    element: "#demo-theme",
    popover: {
      title: "Style However You Want",
      description:
        "You can use the default class names and override the styles or you can pass a custom class name to the popoverClass option either globally or per step.",
      side: "left",
      align: "center",
    },
  });
 */
  driverObj.setConfig({
    ...driverObj.getConfig(),
    nextBtnText: "Siguiente",
    prevBtnText: "Anterior",
    doneBtnText: "Finalizar",
  });

  walk?.addEventListener("click", function () {
    driverObj.drive();
  });
</script>
